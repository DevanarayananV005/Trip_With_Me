<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Details</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <style>
        .error-message {
            color: red;
            font-size: 12px;
        }
        .success-message {
            color: green;
            font-size: 12px;
        }
        .btn {
            margin-top: 10px;
        }
        input {
            margin-bottom: 5px;
        }
        .register-home {
            background: rgba(143, 110, 110, 0.78);
            border-radius: 16px;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            border: 1px solid rgba(143, 110, 110, 0.3);
        }
        body {
            background: black;
        }
        .total-reg {
            background: rgba(255, 255, 255, 1);
            border-radius: 16px;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
    </style>
</head>
<body>
    <h1 style="color:white;font-family: 'Times New Roman', Times, serif;">TRIP WITH ME</h1>
    <div class="total-reg" style="width: 1322px;margin-left: 96px;margin-top: 50px;height: 620px;">
        <div class="reg-img">
            <img src="static/images/aes8.jpg" alt="image" height="500px" width="500px" style="margin-top: 58px;margin-left: 61px;border-radius:10px;">
        </div>

        <div class="register-home" style="height: 500px;width: 484px;color:white;margin-left: 772px;margin-top: -496px;">
            
            <h2 style="font-family:georgia,garamond,serif;margin-top: 22px;margin-left: 20px;">Personal Details</h2><br>
            <center>
            <form id="detailform" method="POST">
                <table align="center">
                    <tr>
                        <td colspan="2"><input type="text" id="adname" name="adname" class="input-group-text" placeholder="Enter House Name or Number" required style="width: 401px;">
                        <p id="adnameError" class="error-message" style="height: 20px; width: 227px;"></p></td>
                    </tr>
                    
                    <tr>
                        <td>
                            <label for="state">Select State:</label>
                            <select id="state" name="state" class="form-select" required style="width: 170px;">
                                <option value="">Select a state</option>
                            </select>
                            <p id="stateError" class="error-message" style="height: 20px;"></p>
                        </td>
                        <td>
                            <label for="district">Select District:</label>
                            <select id="district" name="district" class="form-select" required style="width: 170px;">
                                <option value="">Select a district</option>
                            </select>
                            <p id="districtError" class="error-message" style="height: 20px;"></p>
                        </td>
                    </tr>
            
                    <tr>
                        <td><input type="text" id="pin" name="pin" class="input-group-text" placeholder="Pincode" required style="width: 170px;">
                        <p id="pinError" class="error-message" style="height: 30px;"></p></td>
                        <td><input type="text" id="phone" name="phone" class="input-group-text" placeholder="Phone" required style="width: 170px;">                          
                            <p id="phoneError" class="error-message" style="height: 30px;"></p> </td> 

                       
                    </tr>

                    <tr>
                        <td><p style="width: 100px;margin-left: 64px;">D.O.B:</p>
                            <p id="dobError" class="error-message" style="height: 10px;"></p></td></td>
                        <td><input type="date" id="dob" name="dob" class="form-control" style="width: 140px;" required>
                        <p id="dobError" class="error-message" style="height: 10px;"></p></td>
                        <td><p width="100px"></p></td>
                    </tr>
            
                    <tr>
                        <td colspan="2"><button type="submit" id="submitButton" class="btn btn-outline-light" disabled>Upload Details</button></td>
                    </tr>
                </table>
            </form>
            </center>
        </div>
    </div>

    <script>
        const indiaStatesDistricts = {
            "Andhra Pradesh": ["Anantapur", "Chittoor", "East Godavari", "Guntur", "Krishna", "Kurnool", "Prakasam", "Srikakulam", "Visakhapatnam", "Vizianagaram", "West Godavari", "YSR Kadapa"],
            "Arunachal Pradesh": ["Tawang", "West Kameng", "East Kameng", "Papum Pare", "Kurung Kumey", "Kra Daadi", "Lower Subansiri", "Upper Subansiri", "West Siang", "East Siang", "Siang", "Upper Siang", "Lower Siang", "Lower Dibang Valley", "Dibang Valley", "Anjaw", "Lohit", "Namsai", "Changlang", "Tirap", "Longding"],
            "Assam": ["Baksa", "Barpeta", "Biswanath", "Bongaigaon", "Cachar", "Charaideo", "Chirang", "Darrang", "Dhemaji", "Dhubri", "Dibrugarh", "Dima Hasao", "Goalpara", "Golaghat", "Hailakandi", "Hojai", "Jorhat", "Kamrup", "Kamrup Metropolitan", "Karbi Anglong", "Karimganj", "Kokrajhar", "Lakhimpur", "Majuli", "Morigaon", "Nagaon", "Nalbari", "Sivasagar", "Sonitpur", "South Salmara-Mankachar", "Tinsukia", "Udalguri", "West Karbi Anglong"],
            "Bihar": ["Araria", "Arwal", "Aurangabad", "Banka", "Begusarai", "Bhagalpur", "Bhojpur", "Buxar", "Darbhanga", "East Champaran (Motihari)", "Gaya", "Gopalganj", "Jamui", "Jehanabad", "Kaimur (Bhabua)", "Katihar", "Khagaria", "Kishanganj", "Lakhisarai", "Madhepura", "Madhubani", "Munger (Monghyr)", "Muzaffarpur", "Nalanda", "Nawada", "Patna", "Purnia (Purnea)", "Rohtas", "Saharsa", "Samastipur", "Saran", "Sheikhpura", "Sheohar", "Sitamarhi", "Siwan", "Supaul", "Vaishali", "West Champaran"],
            "Chhattisgarh": ["Balod", "Baloda Bazar", "Balrampur", "Bastar", "Bemetara", "Bijapur", "Bilaspur", "Dantewada (South Bastar)", "Dhamtari", "Durg", "Gariyaband", "Janjgir-Champa", "Jashpur", "Kabirdham (Kawardha)", "Kanker (North Bastar)", "Kondagaon", "Korba", "Koriya", "Mahasamund", "Mungeli", "Narayanpur", "Raigarh", "Raipur", "Rajnandgaon", "Sukma", "Surajpur", "Surguja"],
            "Goa": ["North Goa", "South Goa"],
            "Gujarat": ["Ahmedabad", "Amreli", "Anand", "Aravalli", "Banaskantha (Palanpur)", "Bharuch", "Bhavnagar", "Botad", "Chhota Udepur", "Dahod", "Dangs (Ahwa)", "Devbhoomi Dwarka", "Gandhinagar", "Gir Somnath", "Jamnagar", "Junagadh", "Kachchh", "Kheda (Nadiad)", "Mahisagar", "Mehsana", "Morbi", "Narmada (Rajpipla)", "Navsari", "Panchmahal (Godhra)", "Patan", "Porbandar", "Rajkot", "Sabarkantha (Himmatnagar)", "Surat", "Surendranagar", "Tapi (Vyara)", "Vadodara", "Valsad"],
            "Haryana": ["Ambala", "Bhiwani", "Charkhi Dadri", "Faridabad", "Fatehabad", "Gurgaon", "Hisar", "Jhajjar", "Jind", "Kaithal", "Karnal", "Kurukshetra", "Mahendragarh", "Mewat", "Palwal", "Panchkula", "Panipat", "Rewari", "Rohtak", "Sirsa", "Sonipat", "Yamunanagar"],
            "Himachal Pradesh": ["Bilaspur", "Chamba", "Hamirpur", "Kangra", "Kinnaur", "Kullu", "Lahaul &amp; Spiti", "Mandi", "Shimla", "Sirmaur (Sirmour)", "Solan", "Una"],
            "Jharkhand": ["Bokaro", "Chatra", "Deoghar", "Dhanbad", "Dumka", "East Singhbhum", "Garhwa", "Giridih", "Godda", "Gumla", "Hazaribagh", "Jamtara", "Khunti", "Koderma", "Latehar", "Lohardaga", "Pakur", "Palamu", "Ramgarh", "Ranchi", "Sahebganj", "Seraikela-Kharsawan", "Simdega", "West Singhbhum"],
            "Karnataka": ["Bagalkot", "Ballari (Bellary)", "Belagavi (Belgaum)", "Bengaluru (Bangalore) Rural", "Bengaluru (Bangalore) Urban", "Bidar", "Chamarajanagar", "Chikballapur", "Chikkamagaluru (Chikmagalur)", "Chitradurga", "Dakshina Kannada", "Davanagere", "Dharwad", "Gadag", "Hassan", "Haveri", "Kalaburagi (Gulbarga)", "Kodagu", "Kolar", "Koppal", "Mandya", "Mysuru (Mysore)", "Raichur", "Ramanagara", "Shivamogga (Shimoga)", "Tumakuru (Tumkur)", "Udupi", "Uttara Kannada (Karwar)", "Vijayapura (Bijapur)", "Yadgir"],
            "Kerala": ["Alappuzha", "Ernakulam", "Idukki", "Kannur", "Kasaragod", "Kollam", "Kottayam", "Kozhikode", "Malappuram", "Palakkad", "Pathanamthitta", "Thiruvananthapuram", "Thrissur", "Wayanad"],
            "Madhya Pradesh": ["Agar Malwa", "Alirajpur", "Anuppur", "Ashoknagar", "Balaghat", "Barwani", "Betul", "Bhind", "Bhopal", "Burhanpur", "Chhatarpur", "Chhindwara", "Damoh", "Datia", "Dewas", "Dhar", "Dindori", "Guna", "Gwalior", "Harda", "Hoshangabad", "Indore", "Jabalpur", "Jhabua", "Katni", "Khandwa", "Khargone", "Mandla", "Mandsaur", "Morena", "Narsinghpur", "Neemuch", "Niwari", "Panna", "Raisen", "Rajgarh", "Ratlam", "Rewa", "Sagar", "Satna", "Sehore", "Seoni", "Shahdol", "Shajapur", "Sheopur", "Shivpuri", "Sidhi", "Singrauli", "Tikamgarh", "Ujjain", "Umaria", "Vidisha"],
            "Maharashtra": ["Ahmednagar", "Akola", "Amravati", "Aurangabad", "Beed", "Bhandara", "Buldhana", "Chandrapur", "Dhule", "Gadchiroli", "Gondia", "Hingoli", "Jalgaon", "Jalna", "Kolhapur", "Latur", "Mumbai City", "Mumbai Suburban", "Nagpur", "Nanded", "Nandurbar", "Nashik", "Osmanabad", "Palghar", "Parbhani", "Pune", "Raigad", "Ratnagiri", "Sangli", "Satara", "Sindhudurg", "Solapur", "Thane", "Wardha", "Washim", "Yavatmal"],
            "Manipur": ["Bishnupur", "Chandel", "Churachandpur", "Imphal East", "Imphal West", "Jiribam", "Kakching", "Kamjong", "Kangpokpi", "Noney", "Pherzawl", "Senapati", "Tamenglong", "Tengnoupal", "Thoubal", "Ukhrul"],
            "Meghalaya": ["East Garo Hills", "East Jaintia Hills", "East Khasi Hills", "North Garo Hills", "Ri Bhoi", "South Garo Hills", "South West Garo Hills ", "South West Khasi Hills", "West Garo Hills", "West Jaintia Hills", "West Khasi Hills"],
            "Mizoram": ["Aizawl", "Champhai", "Kolasib", "Lawngtlai", "Lunglei", "Mamit", "Saiha", "Serchhip"],
            "Nagaland": ["Dimapur", "Kiphire", "Kohima", "Longleng", "Mokokchung", "Mon", "Noklak", "Peren", "Phek", "Tuensang", "Wokha", "Zunheboto"],
            "Odisha": ["Angul", "Balangir", "Balasore", "Bargarh", "Bhadrak", "Boudh", "Cuttack", "Deogarh", "Dhenkanal", "Gajapati", "Ganjam", "Jagatsinghapur", "Jajpur", "Jharsuguda", "Kalahandi", "Kandhamal", "Kendrapara", "Kendujhar (Keonjhar)", "Khordha", "Koraput", "Malkangiri", "Mayurbhanj", "Nabarangpur", "Nayagarh", "Nuapada", "Puri", "Rayagada", "Sambalpur", "Sonepur", "Sundargarh"],
            "Punjab": ["Amritsar", "Barnala", "Bathinda", "Faridkot", "Fatehgarh Sahib", "Fazilka", "Ferozepur", "Gurdaspur", "Hoshiarpur", "Jalandhar", "Kapurthala", "Ludhiana", "Mansa", "Moga", "Mohali", "Muktsar", "Pathankot", "Patiala", "Rupnagar", "Sangrur", "Shaheed Bhagat Singh Nagar", "Tarn Taran"],
            "Rajasthan": ["Ajmer", "Alwar", "Banswara", "Baran", "Barmer", "Bharatpur", "Bhilwara", "Bikaner", "Bundi", "Chittorgarh", "Churu", "Dausa", "Dholpur", "Dungarpur", "Hanumangarh", "Jaipur", "Jaisalmer", "Jalore", "Jhalawar", "Jhunjhunu", "Jodhpur", "Karauli", "Kota", "Nagaur", "Pali", "Pratapgarh", "Rajsamand", "Sawai Madhopur", "Sikar", "Sirohi", "Sri Ganganagar", "Tonk", "Udaipur"],
            "Sikkim": ["East Sikkim", "North Sikkim", "South Sikkim", "West Sikkim"],
            "Tamil Nadu": ["Ariyalur", "Chengalpet", "Chennai", "Coimbatore", "Cuddalore", "Dharmapuri", "Dindigul", "Erode", "Kallakurichi", "Kancheepuram", "Kanyakumari", "Karur", "Krishnagiri", "Madurai", "Nagapattinam", "Namakkal", "Nilgiris", "Perambalur", "Pudukkottai", "Ramanathapuram", "Ranipet", "Salem", "Sivaganga", "Tenkasi", "Thanjavur", "Theni", "Thoothukudi (Tuticorin)", "Tiruchirappalli", "Tirunelveli", "Tirupathur", "Tiruppur", "Tiruvallur", "Tiruvannamalai", "Tiruvarur", "Vellore", "Viluppuram", "Virudhunagar"],
            "Telangana": ["Adilabad", "Bhadradri Kothagudem", "Hyderabad", "Jagtial", "Jangaon", "Jayashankar Bhoopalpally", "Jogulamba Gadwal", "Kamareddy", "Karimnagar", "Khammam", "Kumuram Bheem Asifabad", "Mahabubabad", "Mahabubnagar", "Mancherial", "Medak", "Medchal", "Mulugu", "Nagarkurnool", "Nalgonda", "Narayanpet", "Nirmal", "Nizamabad", "Peddapalli", "Rajanna Sircilla", "Ranga Reddy", "Sangareddy", "Siddipet", "Suryapet", "Vikarabad", "Wanaparthy", "Warangal (Rural)", "Warangal (Urban)", "Yadadri Bhuvanagiri"],
            "Tripura": ["Dhalai", "Gomati", "Khowai", "North Tripura", "Sepahijala", "South Tripura", "Unakoti", "West Tripura"],
            "Uttarakhand": ["Almora", "Bageshwar", "Chamoli", "Champawat", "Dehradun", "Haridwar", "Nainital", "Pauri Garhwal", "Pithoragarh", "Rudraprayag", "Tehri Garhwal", "Udham Singh Nagar", "Uttarkashi"],
            "Uttar Pradesh": ["Agra", "Aligarh", "Ambedkar Nagar", "Amethi (Chatrapati Sahuji Mahraj Nagar)", "Amroha (J.P. Nagar)", "Auraiya", "Ayodhya (Faizabad)", "Azamgarh", "Badaun", "Baghpat", "Bahraich", "Ballia", "Balrampur", "Banda", "Barabanki", "Bareilly", "Basti", "Bhadohi", "Bijnor", "Budaun", "Bulandshahr", "Chandauli", "Chitrakoot", "Deoria", "Etah", "Etawah", "Farrukhabad", "Fatehpur", "Firozabad", "Gautam Buddha Nagar", "Ghaziabad", "Ghazipur", "Gonda", "Gorakhpur", "Hamirpur", "Hapur (Panchsheel Nagar)", "Hardoi", "Hathras", "Jalaun", "Jaunpur", "Jhansi", "Kannauj", "Kanpur Dehat", "Kanpur Nagar", "Kasganj (Kanshiram Nagar)", "Kaushambi", "Kushinagar (Padrauna)", "Lakhimpur - Kheri", "Lalitpur", "Lucknow", "Maharajganj", "Mahoba", "Mainpuri", "Mathura", "Mau", "Meerut", "Mirzapur", "Moradabad", "Muzaffarnagar", "Pilibhit", "Pratapgarh", "Prayagraj", "Raebareli", "Rampur", "Saharanpur", "Sambhal (Bhim Nagar)", "Sant Kabir Nagar", "Shahjahanpur", "Shamali (Prabuddh Nagar)", "Shravasti", "Siddharth Nagar", "Sitapur", "Sonbhadra", "Sultanpur", "Unnao", "Varanasi"],
            "West Bengal": ["Alipurduar", "Bankura", "Birbhum", "Cooch Behar", "Dakshin Dinajpur (South Dinajpur)", "Darjeeling", "Hooghly", "Howrah", "Jalpaiguri", "Jhargram", "Kalimpong", "Kolkata", "Malda", "Murshidabad", "Nadia", "North 24 Parganas", "Paschim Medinipur (West Medinipur)", "Paschim (West) Burdwan (Bardhaman)", "Purba Burdwan (Bardhaman)", "Purba Medinipur (East Medinipur)", "Purulia", "South 24 Parganas", "Uttar Dinajpur (North Dinajpur)"]
        };
    
        const stateSelect = document.getElementById('state');
        const districtSelect = document.getElementById('district');
    
        // Populate states
        Object.keys(indiaStatesDistricts).forEach(state => {
            const option = document.createElement('option');
            option.value = state;
            option.text = state;
            stateSelect.add(option);
        });
    
        // Update districts when a state is selected
        stateSelect.addEventListener('change', function() {
            districtSelect.innerHTML = '<option value="">Select a district</option>';
            const selectedState = this.value;
            if (selectedState) {
                const districts = indiaStatesDistricts[selectedState];
                districts.forEach(district => {
                    const option = document.createElement('option');
                    option.value = district;
                    option.text = district;
                    districtSelect.add(option);
                });
            }
        });
    
        // Initialize form validation
        const adnameInput = document.getElementById('adname');
        const pinInput = document.getElementById('pin');
        const phoneInput = document.getElementById('phone');
        const dobInput = document.getElementById('dob');
        const submitButton = document.getElementById('submitButton');
    
        const adnameError = document.getElementById('adnameError');
        const districtError = document.getElementById('districtError');
        const stateError = document.getElementById('stateError');
        const pinError = document.getElementById('pinError');
        const phoneError = document.getElementById('phoneError');
        const dobError = document.getElementById('dobError');
    
        function validateInput(input, regex, errorElement, errorMessage) {
            if (regex.test(input.value)) {
                errorElement.textContent = '';
                return true;
            } else {
                errorElement.textContent = errorMessage;
                return false;
            }
        }
    
        function validateAdname() {
            return validateInput(adnameInput, /^[a-zA-Z0-9 ]{3,}$/, adnameError, 'Invalid adname. Minimum 3 characters.');
        }
    
        function validateDistrict() {
            return districtSelect.value !== '' ? (districtError.textContent = '', true) : (districtError.textContent = 'Please select a district.', false);
        }
    
        function validateState() {
            return stateSelect.value !== '' ? (stateError.textContent = '', true) : (stateError.textContent = 'Please select a state.', false);
        }
    
        function validatePin() {
            return validateInput(pinInput, /^[0-9]{6}$/, pinError, 'Invalid pin. Exactly 6 digits.');
        }
    
        function validatePhone() {
            return validateInput(phoneInput, /^[0-9]{10}$/, phoneError, 'Invalid phone. Exactly 10 digits.');
        }
    
        function validateDOB() {
            const now = new Date();
            const minDate = new Date(now.getFullYear() - 70, now.getMonth(), now.getDate());
            const maxDate = new Date(now.getFullYear() - 18, now.getMonth(), now.getDate());
            const dob = new Date(dobInput.value);
    
            if (dob >= minDate && dob <= maxDate) {
                dobError.textContent = '';
                return true;
            } else {
                dobError.textContent = 'Invalid date. Age should be between 18 and 70 years.';
                return false;
            }
        }
    
        function validateForm() {
            const isValidAdname = validateAdname();
            const isValidDistrict = validateDistrict();
            const isValidState = validateState();
            const isValidPin = validatePin();
            const isValidPhone = validatePhone();
            const isValidDOB = validateDOB();
    
            submitButton.disabled = !(isValidAdname && isValidDistrict && isValidState && isValidPin && isValidPhone && isValidDOB);
            return submitButton.disabled === false;
        }
    
        adnameInput.addEventListener('input', validateForm);
        districtSelect.addEventListener('change', validateForm);
        stateSelect.addEventListener('change', validateForm);
        pinInput.addEventListener('input', validateForm);
        phoneInput.addEventListener('input', validateForm);
        dobInput.addEventListener('change', validateForm);
    
        document.getElementById('detailform').addEventListener('submit', function(e) {
            e.preventDefault();
            if (validateForm()) {
                const formData = {
                    adname: adnameInput.value,
                    district: districtSelect.value,
                    state: stateSelect.value,
                    pin: pinInput.value,
                    phone: phoneInput.value,
                    dob: dobInput.value
                };
    
                fetch('/saveDetails', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                }).then(response => response.json()).then(data => {
                    if (data.success) {
                        window.location.href = 'photopik';
                    } else {
                        alert('Failed to save details');
                    }
                }).catch(error => {
                    console.error('Error:', error);
                    alert('Failed to save details');
                });
            }
        });
    </script>
</body> 
</html>
